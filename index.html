<!doctype html>
<!-- î¨0î¨‚ -->
<!-- î¨1î¨‚ -->
<html lang="ja">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>çŸ¥è­˜ã®æ°´æ§½ï½œéŠã³ãªãŒã‚‰çŸ¥ãŒæ³³ã</title>
<meta name="description" content="æµ·ã®ã‚ˆã†ã«åºƒãŒã‚‹çŸ¥è­˜ã‚’ã€æ¤œç´¢ã¨ã‚¿ã‚°ã§ã‚µãƒƒã¨æ¢ç´¢ã€‚ã‚¹ãƒãƒ›æœ€é©ã®ã‚«ãƒ¼ãƒ‰ä¸€è¦§ã§å­¦ã¹ã¾ã™ã€‚">
<meta name="theme-color" content="#f0f6ff">
<meta property="og:title" content="çŸ¥è­˜ã®æ°´æ§½">
<meta property="og:description" content="æµ·ã®ã‚ˆã†ã«åºƒãŒã‚‹çŸ¥è­˜ã‚’ã€æ¤œç´¢ã¨ã‚¿ã‚°ã§ã‚µãƒƒã¨æ¢ç´¢ã€‚ã‚¹ãƒãƒ›æœ€é©ã®ã‚«ãƒ¼ãƒ‰ä¸€è¦§ã§å­¦ã¹ã¾ã™ã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/quiz/">
<meta property="og:image" content="https://haisuikounozarigani.github.io/quiz/assets/hero/01.png">
<link rel="preload" as="image" href="/quiz/assets/hero/01.png">
<style>
:root{
  /* â”€â”€ é’ãƒ™ãƒ¼ã‚¹ï¼ˆå¿ƒã®æ¨™æœ¬ã¨åŒæ§‹æˆï¼‰ â”€â”€ */
  --bg1:#f6fbff; --bg2:#eef4ff; --card:#fff; --line:#dbe8ff; --fg:#1f2a3a; --muted:#5b6a75;
  --accent:#4aa8ff; --accent2:#a48bff; --chip:#eaf3ff; --chipb:#dfe8ff;
}
*{box-sizing:border-box} html,body{height:100%} html{-webkit-text-size-adjust:100%;text-size-adjust:100%}
body{margin:0;color:var(--fg);font-family:"Noto Sans JP",system-ui,sans-serif;background:linear-gradient(160deg,var(--bg1),var(--bg2))}
.hidden{display:none!important}

/* Splash */
.splash{position:fixed;inset:0;z-index:9999;display:grid;place-items:center;overflow:hidden;cursor:pointer}
.splash::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,.55) 70%,rgba(255,255,255,.8))}
.splash .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:saturate(1.05)}
.splash .fallback{position:absolute;inset:0;background:radial-gradient(1200px 600px at 50% 30%, #e9f4ff, #eef0ff)}
.splash .hero{position:relative;z-index:1;text-align:center;padding:22px}
h1{margin:0 0 6px;font-size:clamp(22px,6vw,34px);letter-spacing:.02em;text-wrap:balance}
.sub{margin:0;color:var(--muted)}
.tap{margin-top:14px;font-size:.95em;color:#6a7580}
.splash.closing{opacity:0;transition:opacity .28s ease;pointer-events:auto}

/* Main */
.wrap{max-width:980px;margin:20px auto 28px;padding:0 14px max(28px,env(safe-area-inset-bottom));opacity:0;transform:translateY(12px);transition:opacity .35s ease,transform .35s ease}
.wrap.show{opacity:1;transform:none}

/* Controls */
.controls{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:12px;margin:6px 0 10px;box-shadow:0 8px 22px rgba(74,168,255,.10)}
.controls .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
input[type="search"]{flex:1;padding:12px 14px;border:1px solid #cfe2ff;border-radius:12px;font-size:16px}
.btn{appearance:none;border:1px solid #cfe2ff;background:#fff;border-radius:12px;padding:10px 12px;font-size:14px;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border-color:transparent;color:#fff}
.btn:focus-visible, .chip:focus-visible{outline:3px solid #98bfff;outline-offset:2px}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.chip{padding:8px 12px;border:1px solid #cfe2ff;border-radius:999px;background:var(--chip);cursor:pointer;user-select:none;color:#234;line-height:1.2}
.chip.active{background:var(--chipb);box-shadow:inset 0 0 0 2px #7aa7ff;border-color:transparent}

/* Switcher */
.switcher{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.segbtn{
  appearance:none;border:1px solid #cfe2ff;background:#fff;border-radius:999px;
  padding:10px 14px;font-size:14px;line-height:1;text-decoration:none;color:inherit;
  display:inline-flex;align-items:center;gap:8px;min-height:44px
}
.segbtn.active{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;border-color:transparent;box-shadow:0 6px 18px rgba(74,168,255,.18)}

/* Cardsï¼ˆç”»åƒãªã—ï¼šå¿ƒã®æ¨™æœ¬ã¨åŒã˜ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰ */
.links{display:grid;gap:12px;margin-top:10px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
a.link{
  display:flex;gap:10px;align-items:center;text-decoration:none;color:var(--fg);
  background:var(--card);border:1px solid var(--line);border-radius:16px;padding:12px 14px;
  box-shadow:0 6px 18px rgba(74,168,255,.12);transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease
}
a.link:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(164,139,255,.18);border-color:#d7e6ff}
a.link .emo{display:inline-flex;width:28px;height:28px;align-items:center;justify-content:center;font-size:22px;line-height:1;flex:0 0 auto}
a.link > div{flex:1 1 auto;min-width:0}
.ttl{
  font-weight:800;margin:0;display:block;line-height:1.35;letter-spacing:.01em;text-wrap:balance;
  font-size:clamp(15px,3.8vw,17px);
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden
}
.mini{font-size:.72em;padding:2px 6px;border-radius:8px;border:1px solid #dfe7ff;background:#fff;display:inline-flex;align-items:center;line-height:1;vertical-align:middle;white-space:nowrap}
.mini.new{background:linear-gradient(90deg,#d6ebff,#e0dbff);color:#2b3b4a;border-color:transparent}
.sub2{
  color:var(--muted);font-size:.92em;margin:4px 0 0;line-height:1.5;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden
}
.meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.pill{padding:4px 8px;border-radius:999px;font-size:.8em;border:1px solid #dbe8ff;background:#fff;color:#3b4d5e;display:inline-flex;align-items:center;line-height:1;vertical-align:middle}
.badge{margin-left:auto;padding:8px 12px;border-radius:999px;font-weight:700;font-size:.9em;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;display:inline-flex;align-items:center;line-height:1;vertical-align:middle}

/* Thumbnail modeï¼ˆä½¿ã‚ãªã„ï¼šdata-thumbãŒç„¡ã„é™ã‚Šç„¡åŠ¹ï¼‰ */
.link.with-thumb{display:grid;grid-template-rows:auto 1fr auto;padding:0}
.link.with-thumb .thumb{margin:0;position:relative;aspect-ratio:1200/630;background:#f4f8ff;border-bottom:1px solid var(--line);overflow:hidden;border-top-left-radius:16px;border-top-right-radius:16px}
.link.with-thumb .thumb img{width:100%;height:100%;object-fit:cover;display:block}
.link.with-thumb .emo{display:none}
.link.with-thumb .body{padding:12px 14px}
.link.with-thumb .badge{margin:0 12px 12px auto}

/* Footer */
.note{color:var(--muted);text-align:center;margin:18px 0}
.footerbar{position:sticky;bottom:0;display:flex;gap:10px;justify-content:center;align-items:center;flex-wrap:wrap;padding:10px;background:rgba(255,255,255,.82);
  backdrop-filter:blur(6px) saturate(1.05);border-top:1px solid #e6eefb}
.footerbar a{padding:12px 14px;border:1px solid #dbe8ff;border-radius:999px;text-decoration:none;color:#14202b;background:#fff;cursor:pointer;flex:0 0 auto;white-space:nowrap;line-height:1;display:inline-flex;align-items:center;min-height:44px}

@media (max-width:400px){
  .links{grid-template-columns:1fr}
  a.link{padding:12px}
  .badge{display:none}
}
</style>
</head>
<body>
<!-- Splash -->
<section id="splash" class="splash" aria-label="çŸ¥è­˜ã®æ°´æ§½ã®å…¥å£" tabindex="0" role="button">
  <div class="fallback" aria-hidden="true"></div>
  <img class="bg" alt="çŸ¥è­˜ã®æ°´æ§½ã®ã‚­ãƒ¼ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«"
       src="/quiz/assets/hero/01.png">
  <div class="hero">
    <h1>çŸ¥è­˜ã®æ°´æ§½</h1>
    <p class="sub">ã‚¿ãƒƒãƒ—ï¼ˆã¾ãŸã¯Enter/Spaceï¼‰ã§å…¥å£ãŒé–‹ãã¾ã™ã€‚</p>
  </div>
</section>

<main id="content" class="wrap" aria-live="polite" aria-label="çŸ¥è­˜ã®å…¥å£" tabindex="-1" inert>
  <!-- Controls -->
  <section class="controls" aria-label="æ¤œç´¢ã¨ã‚¿ã‚°">
    <!-- ã‚µã‚¤ãƒˆåˆ‡æ›¿ï¼šç¾åœ¨ãƒšãƒ¼ã‚¸ã‚’å¼·èª¿ -->
    <div class="row switcher" aria-label="ã‚µã‚¤ãƒˆåˆ‡æ›¿">
      <a class="segbtn" href="/shindan/" rel="noopener">ğŸŒŸ å¿ƒã®æ¨™æœ¬</a>
      <a class="segbtn active" href="/quiz/" aria-current="page">ğŸ” çŸ¥è­˜ã®æ°´æ§½</a>
    </div>

    <div class="row">
      <input id="q" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ or #ã‚¿ã‚°ï¼ˆä¾‹ï¼š#æµ· / #å¿ƒç†ï¼‰" aria-label="æ¤œç´¢">
      <button id="btnNew" class="btn" type="button" aria-pressed="false" aria-label="NEWã ã‘è¡¨ç¤º">NEWã ã‘</button>
      <button id="clearBtn" class="btn" type="button" aria-label="æ¤œç´¢ã¨ã‚¿ã‚°ã‚’ã‚¯ãƒªã‚¢">ã‚¯ãƒªã‚¢</button>
    </div>
    <div id="chips" class="chips" role="listbox" aria-multiselectable="false" aria-label="ã‚¿ã‚°ï¼ˆ1ã¤é¸æŠã§çµã‚Šè¾¼ã¿ï¼‰"></div>
  </section>

  <!-- Cardsï¼ˆã‚¯ã‚¤ã‚ºã‚«ãƒ¼ãƒ‰è¿½åŠ ï¼‰ -->
  <nav class="links" id="list" aria-label="è¨˜äº‹/ã‚¯ã‚¤ã‚ºä¸€è¦§ï¼ˆæ¤œç´¢çµæœï¼‰">
    <!-- NEW: çŒ«ã¨çŠ¬ã®å¿ƒç†ç ”ç©¶ã‚¯ã‚¤ã‚º -->
    <a class="link" href="/quiz/inu-neko-quiz.html"
       data-id="inu-neko-quiz" data-tags="ã‚¯ã‚¤ã‚º,å¿ƒç†,çŒ«,çŠ¬" data-mins="3"
       data-updated="2025-09-21"
       data-keywords="çŠ¬æ´¾ çŒ«æ´¾ æ€§æ ¼ ã‚ªã‚­ã‚·ãƒˆã‚·ãƒ³ åå‰ æŒ‡å·®ã— ã—ã£ã½ ç¬ã æ•£æ­©">
      <span class="emo">ğŸ¾</span>
      <div class="body">
        <div class="ttl">çŒ«ã¨çŠ¬ã®å¿ƒç†ç ”ç©¶ã‚¯ã‚¤ã‚º</div>
        <div class="sub2">é¸ã‚“ã ç¬é–“ã«çµæœãŒå‡ºã‚‹ã€ç›´æ„Ÿã¨ç ”ç©¶ã®ã‚ºãƒ¬ã‚’æ¥½ã—ã‚€10å•ã€‚</div>
        <div class="meta"></div>
      </div>
      <span class="badge" data-new>NEW</span>
    </a>

    <!-- æ—¢å­˜ï¼šä½œæˆä¸­ -->
    <a class="link" href="#" aria-disabled="true"
       data-id="wip" data-tags="æµ·" data-updated="2025-09-15"
       data-keywords="ä½œæˆä¸­ WIP æº–å‚™ä¸­">
      <span class="emo">ğŸ”§</span>
      <div class="body">
        <div class="ttl">ä½œæˆä¸­</div>
        <div class="sub2">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã¾ã§å°‘ã€…ãŠå¾…ã¡ãã ã•ã„ã€‚</div>
        <div class="meta"></div>
      </div>
      <span class="badge">æº–å‚™ä¸­</span>
    </a>
  </nav>

  <section id="legal-note" role="note" aria-label="ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦" class="note">
    <h2 style="font-size:1.05em;margin:18px 0 10px">ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h2>
    <ul style="margin:0 0 10px 18px;padding:0;line-height:1.7">
      <li><strong>éææºãƒ»éå…¬å¼ï¼š</strong>æœ¬ã‚µã‚¤ãƒˆã®å„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆè¨˜äº‹ãƒ»ã‚¯ã‚¤ã‚ºç­‰ï¼‰ã¯ç ”ç©¶ä¸€èˆ¬ã®çŸ¥è¦‹ã«<span style="white-space:nowrap">ãƒ’ãƒ³ãƒˆã‚’å¾—ãŸ</span><strong>ç‹¬è‡ªåˆ¶ä½œ</strong>ã§ã™ã€‚å„ç¨®ã®å…¬å¼æ¤œæŸ»ãƒ»å°ºåº¦ã®<strong>åŸæ–‡é …ç›®ã‚„æ­£å¼ãªæ¡ç‚¹æ–¹æ³•ã¯ä½¿ç”¨ã—ã¦ãŠã‚‰ãš</strong>ã€æ¨©åˆ©è€…ã®æ‰¿èªãƒ»ææºãƒ»æ¨å¥¨ã‚’æ„å‘³ã—ã¾ã›ã‚“ã€‚</li>
      <li><strong>åŒ»ç™‚ç”¨é€”ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼š</strong>å¨¯æ¥½ï¼‹è‡ªå·±ç†è§£ã®ç›®å®‰ã‚’ç›®çš„ã¨ã—ãŸèª­ã¿ç‰©/ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã€åŒ»ç™‚çš„ãƒ»å¿ƒç†çš„ãª<strong>è¨ºæ–­ï¼æ²»ç™‚ï¼åŠ©è¨€ã‚’ç›®çš„ã¨ã—ã¾ã›ã‚“</strong>ã€‚å¼·ã„è‹¦ç—›ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯ã€åŒ»ç™‚æ©Ÿé–¢ã‚„å°‚é–€å®¶ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚</li>
      <li><strong>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ï¼š</strong>ãƒšãƒ¼ã‚¸å†…ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã¯<strong>ãƒ–ãƒ©ã‚¦ã‚¶å†…ï¼ˆç«¯æœ«å†…ï¼‰ã§å®Œçµ</strong>ã—ã€ã‚µãƒ¼ãƒãƒ¼ã¸ã®é€ä¿¡ã¯è¡Œã„ã¾ã›ã‚“ã€‚é€²è¡ŒçŠ¶æ³ã‚„ä¸€éƒ¨è¡¨ç¤ºè¨­å®šã®ã¿ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
      <li><strong>è¡¨ç¾ã«ã¤ã„ã¦ï¼š</strong>ã€Œã‚¿ã‚¤ãƒ—ã€ã€Œã‚µã‚¤ã‚³ãƒ‘ã‚¹ã€ç­‰ã®å‘¼ç§°ã¯<strong>æ¯”å–©ãƒ»ä¿—ç§°ãƒ»ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¾</strong>ã§ã‚ã‚Šã€ä»–è€…ã‚’æ–­å®šãƒ»ãƒ©ãƒ™ãƒªãƒ³ã‚°ã™ã‚‹ç”¨é€”ã‚’æ„å›³ã—ã¾ã›ã‚“ã€‚</li>
      <li><strong>å…è²¬ï¼š</strong>æ³•ä»¤ã§èªã‚ã‚‰ã‚Œã‚‹ç¯„å›²ã§ã€æœ¬ã‚µã‚¤ãƒˆã®åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸã„ã‹ãªã‚‹æå¤±ãƒ»æå®³ã«ã¤ã„ã¦ã‚‚ã€å½“ã‚µã‚¤ãƒˆã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
    </ul>
  </section>
</main>

<!-- Footer -->
<nav class="footerbar" aria-label="ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“">
  <a href="https://x.com/oki2a?s=21" target="_blank" rel="noopener">X</a>
  <a href="https://www.instagram.com/zariganitabetai7?igsh=MTdzc245MDJrdWZzYw%3D%3D&utm_source=qr" target="_blank" rel="noopener">Instagram</a>
  <a href="https://lin.ee/KUtaxdD" target="_blank" rel="noopener">å…¬å¼LINE</a>
  <a href="/shindan/seikaku.html">è‡ªå·±ç´¹ä»‹</a>
</nav>

<noscript>
  <div style="max-width:980px;margin:16px auto;padding:0 14px max(28px,env(safe-area-inset-bottom));color:#6b7b86">
    JavaScriptãŒç„¡åŠ¹ã§ã™ã€‚<a href="/quiz/">ä¸€è¦§ã¯ã“ã¡ã‚‰</a>ã€‚
  </div>
</noscript>

<script>
(function(){
  const $  = (q,root=document)=>root.querySelector(q);
  const $$ = (q,root=document)=>[...root.querySelectorAll(q)];

  const splash  = $('#splash');
  const content = $('#content');
  const vibrate = (ms=10)=>('vibrate' in navigator)&&navigator.vibrate(ms);

  // Splash open
  const GUARD_MS=600, HIDE_DELAY=300; let opened=false, guardUntil=0;
  function startClickGuard(){
    guardUntil=performance.now()+GUARD_MS;
    const guard=(e)=>{ if(performance.now()<guardUntil){ e.stopPropagation(); e.preventDefault(); } else { window.removeEventListener('click',guard,true); } };
    window.addEventListener('click',guard,true);
    content.style.pointerEvents='none'; setTimeout(()=>{content.style.pointerEvents='';},GUARD_MS);
  }
  function reveal(ev){
    if(opened) return; opened=true;
    if(ev){ try{ ev.preventDefault(); ev.stopPropagation(); }catch{} }
    startClickGuard();
    splash.classList.add('closing'); splash.setAttribute('aria-hidden','true');
    content.classList.add('show'); vibrate(12);
    setTimeout(()=>{ splash.classList.add('hidden'); splash.classList.remove('closing'); try{ content.removeAttribute('inert'); content.focus({preventScroll:true}); }catch{} }, Math.max(HIDE_DELAY,GUARD_MS));
  }
  splash.addEventListener('pointerup', e=>{ if(e?.target?.closest?.('a,button,input,label')) return; reveal(e); });
  splash.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); reveal(e); } });

  // NEWãƒãƒƒã‚¸ï¼ˆ21æ—¥ä»¥å†…ï¼‰
  const today=new Date();
  $$('#list a.link').forEach(a=>{
    const badge=a.querySelector('[data-new]'); const ds=a.dataset.updated;
    if(badge && ds){ const diff=(today - new Date(ds+'T00:00:00'))/86400000; badge.style.display=(diff<=21)?'inline-flex':'none'; }
  });

  // data-thumb â†’ ã‚µãƒ ãƒï¼ˆä»Šå›ã¯æœªä½¿ç”¨ï¼šdata-thumbãŒã‚ã‚Œã°è‡ªå‹•ã§æœ‰åŠ¹ï¼‰
  $$('#list a.link').forEach(a=>{
    const src=a.dataset.thumb; if(!src) return;
    a.classList.add('with-thumb');
    const fg=document.createElement('figure'); fg.className='thumb';
    const img=new Image(); img.loading='lazy'; img.src=src; img.alt=(a.querySelector('.ttl')?.textContent||'è¨˜äº‹')+'ã®ã‚µãƒ ãƒã‚¤ãƒ«';
    fg.appendChild(img); a.insertBefore(fg,a.firstChild);
  });

  // æ¤œç´¢ãƒ»ã‚¿ã‚°ï¼ˆå˜ä¸€é¸æŠï¼‰
  const q=$('#q'), chipsWrap=$('#chips'), btnNew=$('#btnNew'), clearBtn=$('#clearBtn');

  // ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆå¿…è¦ãªã‚‰è¿½åŠ ï¼‰
  const ALIAS={ 'æ€§æ ¼':'ã“ã“ã‚', 'çŸ­æ™‚é–“':'ã•ãã£ã¨' };
  const ORDER=['æµ·','å¿ƒç†','è„³','ç”Ÿæ´»','ã‚¯ã‚¤ã‚º','è¨ºæ–­','ã“ã“ã‚','ã‚»ãƒ«ãƒ•ã‚±ã‚¢','èªçŸ¥','ä»•äº‹','å ã„','ã‚²ãƒ¼ãƒ é¢¨','ã•ãã£ã¨','ãµã¤ã†','ã—ã£ã‹ã‚Š','é©æ€§'];

  // ã‚«ãƒ¼ãƒ‰ã®ã‚¿ã‚°æ­£è¦åŒ– + ãƒ¡ã‚¿æ•´å½¢
  $$('#list a.link').forEach(a=>{
    const tags=(a.dataset.tags||'').split(',').map(s=>s.trim()).filter(Boolean).map(t=>ALIAS[t]||t);
    a.dataset.tags=[...new Set(tags)].join(',');
    const meta=a.querySelector('.meta'); meta.innerHTML='';
    const mins=a.dataset.mins; if(mins){ const s=document.createElement('span'); s.className='pill'; s.textContent=`â±${mins}åˆ†`; meta.appendChild(s); }
  });

  // ã‚¿ã‚°å€™è£œï¼ˆå­˜åœ¨ã™ã‚‹ã‚‚ã®ã®ã¿ï¼‰
  const counts={};
  $$('#list a.link').forEach(a=>{
    (a.dataset.tags||'').split(',').filter(Boolean).forEach(t=>{ counts[t]=(counts[t]||0)+1; });
  });
  const tagsSorted=Object.keys(counts).sort((a,b)=>{
    const ai=ORDER.indexOf(a), bi=ORDER.indexOf(b);
    if(ai!==-1 || bi!==-1){ return (ai===-1?999:ai) - (bi===-1?999:bi); }
    return a.localeCompare(b,'ja');
  });

  // ãƒãƒƒãƒ—ç”Ÿæˆï¼ˆå˜ä¸€é¸æŠï¼‰
  let activeTag=null; const chipMap=new Map();
  tagsSorted.forEach(tag=>{
    const b=document.createElement('button');
    b.type='button'; b.className='chip'; b.textContent='#'+tag; b.dataset.tag=tag;
    b.setAttribute('role','option'); b.setAttribute('aria-selected','false');
    b.addEventListener('click',()=> setActiveTag(activeTag===tag? null : tag));
    b.addEventListener('keydown',e=>{
      if(e.key===' '||e.key==='Enter'){ e.preventDefault(); b.click(); }
      if(e.key==='ArrowRight'||e.key==='ArrowLeft'){
        e.preventDefault(); const chips=[...chipsWrap.querySelectorAll('.chip')];
        const i=chips.indexOf(document.activeElement); if(i>-1){ chips[(i+(e.key==='ArrowRight'?1:-1)+chips.length)%chips.length].focus(); }
      }
    });
    chipsWrap.appendChild(b); chipMap.set(tag,b);
  });

  function setActiveTag(tag){
    activeTag=tag;
    chipMap.forEach((btn,t)=>{ const on=(t===tag); btn.classList.toggle('active',on); btn.setAttribute('aria-selected',on?'true':'false'); });
    if(tag){ history.replaceState({},'', '#tag='+encodeURIComponent(tag)); } else { history.replaceState({},'', location.pathname + location.search); }
    apply();
  }

  // åˆæœŸï¼š#tag= or ?q=
  const params=new URLSearchParams(location.search);
  q.value=params.get('q')||'';
  const initTag=location.hash.startsWith('#tag=') ? decodeURIComponent(location.hash.slice(5)) : '';
  if(initTag && chipMap.has(initTag)) setActiveTag(initTag);

  // å…¥åŠ›ï¼šæœ«å°¾ #ã‚¿ã‚° ã‚’åŒæœŸ
  q.addEventListener('input', ()=>{
    const m=q.value.match(/(^|\s)#([^\s#]+)$/);
    if(m){ const t=m[2]; if(chipMap.has(t)) setActiveTag(t); }
    apply();
  });

  // NEWã ã‘
  let newOnly=false;
  btnNew.addEventListener('click', ()=>{
    newOnly=!newOnly; btnNew.classList.toggle('primary',newOnly);
    btnNew.setAttribute('aria-pressed', newOnly?'true':'false');
    btnNew.textContent=newOnly?'NEWã ã‘ï¼ˆè§£é™¤ï¼‰':'NEWã ã‘';
    apply();
  });

  // ã‚¯ãƒªã‚¢
  clearBtn.addEventListener('click', ()=>{ q.value=''; setActiveTag(null); apply(); });

  // ãƒ•ã‚£ãƒ«ã‚¿
  function apply(){
    const kw=q.value.trim().toLowerCase().split(/\s+/).filter(Boolean).filter(t=>!t.startsWith('#'));
    let shown=0;
    $$('#list a.link').forEach(a=>{
      const tags=(a.dataset.tags||'').split(',').filter(Boolean);
      const text=(a.textContent+' '+(a.dataset.keywords||'')).toLowerCase();
      const okTag = activeTag ? tags.includes(activeTag) : true;
      const okKw  = kw.length ? kw.every(w=>text.includes(w)) : true;
      const isNew = (()=>{ const b=a.querySelector('[data-new]'); return b && b.style.display!=='none'; })();
      const show  = okTag && okKw && (newOnly? isNew : true);
      a.style.display=show?'':'none'; if(show) shown++;
    });
    $('#list').setAttribute('aria-label', `è¨˜äº‹/ã‚¯ã‚¤ã‚ºä¸€è¦§ï¼ˆæ¤œç´¢çµæœ ${shown} ä»¶ï¼‰`);
  }
  apply();

  // Escã§æ¤œç´¢ã‚¯ãƒªã‚¢
  document.addEventListener('keydown', e=>{ if(e.key==='Escape'){ q.value=''; setActiveTag(null); apply(); } });
})();
</script>
</body>
</html>
